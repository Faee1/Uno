function getDirections(restaurantLon, restaurantLat) {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
            const userLat = position.coords.latitude;
            const userLon = position.coords.longitude;

            const url = `https://router.project-osrm.org/route/v1/driving/${userLon},${userLat};${restaurantLon},${restaurantLat}?overview=full`;
            console.log('Fetching route from:', url); // Log the URL being fetched
            
            fetch(url)
                .then(response => {
                    console.log('Response status:', response.status); // Log the response status
                    if (!response.ok) {
                        throw new Error('Network response was not ok: ' + response.statusText);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Route data:', data); // Log the route data
                    if (data && data.routes && data.routes.length > 0) {
                        const route = data.routes[0].geometry.coordinates;
                        const latlngs = route.map(coord => [coord[1], coord[0]]);
                        const polyline = L.polyline(latlngs, { color: 'blue' }).addTo(map);
                        map.fitBounds(polyline.getBounds());
                        L.marker([userLat, userLon]).addTo(map).bindPopup('You are here').openPopup();
                    } else {
                        alert('No route found!');
                    }
                })
                .catch(err => {
                    console.error('Fetch error:', err);
                    alert('Error fetching route! Please try again.');
                });
        }, (error) => {
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    alert("User denied the request for Geolocation.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("Location information is unavailable.");
                    break;
                case error.TIMEOUT:
                    alert("The request to get user location timed out.");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("An unknown error occurred.");
                    break;
            }
        });
    } else {
        alert("Geolocation is not supported by this browser.");
    }
}
